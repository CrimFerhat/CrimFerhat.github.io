<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr Ferhat Tura">

<title>Lecture notes week 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Lecture notes week 1_files/libs/clipboard/clipboard.min.js"></script>
<script src="Lecture notes week 1_files/libs/quarto-html/quarto.js"></script>
<script src="Lecture notes week 1_files/libs/quarto-html/popper.min.js"></script>
<script src="Lecture notes week 1_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Lecture notes week 1_files/libs/quarto-html/anchor.min.js"></script>
<link href="Lecture notes week 1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Lecture notes week 1_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Lecture notes week 1_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Lecture notes week 1_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Lecture notes week 1_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lecture notes week 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr Ferhat Tura </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="session-1-introduction" class="level1">
<h1><strong>Session 1: Introduction</strong></h1>
<section id="what-is-quantitative-social-science" class="level2">
<h2 class="anchored" data-anchor-id="what-is-quantitative-social-science"><strong>What is Quantitative Social Science?</strong></h2>
<p>Quantitative Social Science is the application of numerical data and statistical methods to understand and analyse social phenomena. It provides a systematic approach to studying human behaviour, social structures, and interactions by focusing on measurable evidence.</p>
<p>In this field, researchers use data to answer questions about society, such as:</p>
<ul>
<li><p>What factors influence crime rates in urban areas?</p></li>
<li><p>How do socioeconomic conditions affect access to education?</p></li>
<li><p>What is the relationship between income inequality and social trust?</p></li>
</ul>
<p><strong>Key Features of Quantitative Social Science:</strong></p>
<ol type="1">
<li><p><strong>Data-Driven Insights</strong>: Researchers collect and analyse data, often using surveys, experiments, or administrative records, to uncover patterns and relationships.</p></li>
<li><p><strong>Statistical Rigour</strong>: Methods such as regression analysis, hypothesis testing, and machine learning models are used to ensure conclusions are reliable and valid.</p></li>
<li><p><strong>Generalisability</strong>: Findings from quantitative research are often applicable to broader populations, making them essential for policymaking and evidence-based practices.</p></li>
<li><p><strong>Comparative Analysis</strong>: Quantitative approaches allow comparisons across different groups, regions, or time periods to identify trends and disparities.</p></li>
</ol>
</section>
<section id="why-quantitative-methods-matter" class="level2">
<h2 class="anchored" data-anchor-id="why-quantitative-methods-matter">Why Quantitative Methods Matter?</h2>
<ul>
<li><p>They help to test theories and hypotheses in a structured way.</p></li>
<li><p>Quantitative data can uncover causal relationships and predict future outcomes.</p></li>
<li><p>Policymakers and organisations rely on quantitative research to design effective interventions and allocate resources efficiently.</p></li>
</ul>
<p>For example, a criminologist might use quantitative data to explore how neighbourhood-level unemployment affects crime rates, while a sociologist might analyse survey data to study changes in public attitudes towards immigration over time.</p>
<p>In summary, Quantitative Social Science equips researchers with tools to address complex societal challenges, offering evidence-based solutions that can drive meaningful change.</p>
</section>
</section>
<section id="session-2-introduction-to-r-and-rstudio" class="level1">
<h1><strong>Session 2: Introduction to R and RStudio</strong></h1>
<section id="finding-and-installing-r-and-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="finding-and-installing-r-and-rstudio"><strong>Finding and Installing R and RStudio</strong></h2>
<p>R and RStudio are essential tools for conducting data analysis in R. This section outlines how to find, download, and install these software packages.</p>
<p><strong>Step 1: Installing R</strong></p>
<p>R is the programming language at the core of our analysis. To install R:</p>
<ol type="1">
<li><p>Visit the <a href="https://cran.r-project.org/">Comprehensive R Archive Network (CRAN)</a>.</p></li>
<li><p>Select your operating system:</p>
<ul>
<li><p><strong>Windows</strong>: Click on Download R for Windows and follow the prompts to download the installer.</p></li>
<li><p><strong>macOS</strong>: Click on Download R for macOS and select the appropriate version for your system.</p></li>
<li><p><strong>Linux</strong>: Choose the link for your Linux distribution and follow the provided instructions.</p></li>
</ul></li>
<li><p>Once downloaded, run the installer and follow the on-screen instructions to complete the setup.</p></li>
</ol>
<p><strong>Step 2: Installing RStudio</strong></p>
<p>RStudio is an integrated development environment (IDE) designed to make working with R more efficient and user-friendly, offering advanced tools and an intuitive interface.</p>
<ol type="1">
<li><p>Visit the <a href="https://posit.co/download/rstudio-desktop/">RStudio Desktop Download Page</a>.</p></li>
<li><p>Download the free version (RStudio Desktop) that matches your operating system (Windows, Mac, or Linux).</p></li>
<li><p>Run the installer and follow the on-screen instructions to complete the installation.</p></li>
</ol>
<p><strong>Useful Links</strong></p>
<ul>
<li><p><a href="https://cran.r-project.org/manuals.html">R Documentation</a> – Comprehensive guides and manuals for R.</p></li>
<li><p><a href="https://posit.co/resources/">RStudio Documentation</a> – Tutorials and resources to help you get started with RStudio.</p></li>
<li><p><a href="https://swirlstats.com/students.html">Introduction to R (via swirl)</a> – An interactive way to learn R directly within RStudio.</p></li>
</ul>
<p>By completing these steps, you’ll have both R and RStudio installed and ready for your quantitative research projects. If you encounter any issues during the process, feel free to reach out for support!</p>
</section>
<section id="environment-and-layout-of-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="environment-and-layout-of-rstudio"><strong>Environment and Layout of RStudio</strong></h2>
<p>RStudio provides a powerful integrated development environment (IDE) for working with R. Its layout is designed to facilitate efficient data analysis, coding, and visualisation. The RStudio interface is organised into four main panels, each serving a different purpose. Understanding the layout of RStudio will help you navigate the software effectively and maximise your productivity. Here’s an overview of the RStudio environment:</p>
<p><strong>1. Console (Bottom Left Panel)</strong></p>
<p>The <strong>Console</strong> is where you interact directly with R. You can type R commands here and see the immediate output. This panel is essential for performing analysis, running code, and debugging.</p>
<ul>
<li><strong>How to use</strong>: Type commands directly into the Console and press <strong><code>Enter</code></strong> to execute. The results or error messages will be displayed below.</li>
</ul>
<p><strong>2. Source (Top Left Panel)</strong></p>
<p>The <strong>Source</strong> pane is where you write and edit R scripts, R Markdown files, and other code documents. This is the main area for writing and saving your work.</p>
<ul>
<li><p><strong>How to use</strong>: Open a new script by clicking <em>File &gt; New File &gt; R Script</em> or <em>R Markdown</em>. Code written here can be saved, modified, and re-executed.</p></li>
<li><p><strong>Features</strong>:</p>
<ul>
<li><p><strong>Syntax highlighting</strong>: Makes it easier to read and write code by highlighting keywords and functions.</p></li>
<li><p><strong>Line numbers</strong>: Helps you navigate your script quickly.</p></li>
<li><p><strong>Run Code</strong>: Highlight code and click <em>Run</em> to execute it in the Console, or use the shortcut <strong><code>Ctrl+Enter</code></strong> (Windows) or <strong><code>Cmd+Enter</code></strong> (Mac).</p></li>
</ul></li>
</ul>
<p><strong>3. Environment and History (Top Right Panel)</strong></p>
<p>This panel contains two tabs: <strong>Environment</strong> and <strong>History</strong>.</p>
<ul>
<li><p><strong>Environment</strong>: Displays all the objects (such as variables, functions, data frames) currently in your R session. You can click on these objects to inspect their contents.</p>
<ul>
<li>For example, if you create a vector <strong><code>v1 &lt;- c(1, 2, 3)</code></strong>, it will appear in the Environment tab, showing the object name and its contents.</li>
</ul></li>
<li><p><strong>History</strong>: Shows a log of all previously executed commands. You can browse your command history and reuse or modify previous commands.</p></li>
</ul>
<p><strong>4. Files, Plots, Packages, Help, and Viewer (Bottom Right Panel)</strong></p>
<p>This multi-purpose panel has several tabs, which are useful for different tasks:</p>
<ul>
<li><p><strong>Files</strong>: Displays the files and directories in your working directory. You can navigate through your files, open scripts, and manage directories.</p></li>
<li><p><strong>Plots</strong>: Shows any visualisations or plots that are generated from your R code. For example, if you run a plot command like <strong><code>plot(1:10)</code></strong>, the resulting plot will appear here.</p></li>
<li><p><strong>Packages</strong>: Allows you to view and manage R packages. You can install new packages, load/unload them, and check which packages are currently loaded in your session.</p></li>
<li><p><strong>Help</strong>: Provides access to R documentation. If you want help on a function or package, simply type <strong><code>?function_name</code></strong> in the Console or search for it in the Help tab. For example, typing <strong><code>?mean</code></strong> will bring up the documentation for the <strong><code>mean()</code></strong> function.</p></li>
<li><p><strong>Viewer</strong>: Displays interactive content like Shiny apps, web pages, or interactive plots (if supported). This tab is often used when working with web-based tools or visualisation libraries.</p></li>
</ul>
<p><strong>5. Customising RStudio Layout</strong></p>
<p>You can rearrange and resize these panels to suit your preferences. To change the layout:</p>
<ol type="1">
<li><p>Go to <em>Tools &gt; Global Options</em>.</p></li>
<li><p>Under the <em>Pane Layout</em> section, you can choose how you want your panels to be arranged (e.g., switching the Environment panel to the bottom).</p></li>
</ol>
<p><strong>Summary of Key Components:</strong></p>
<ul>
<li><p><strong>Console</strong>: Execute commands and see output.</p></li>
<li><p><strong>Source</strong>: Write and edit code.</p></li>
<li><p><strong>Environment and History</strong>: Track variables and previous commands.</p></li>
<li><p><strong>Files, Plots, Packages, Help, Viewer</strong>: Manage files, view plots, and access documentation.</p></li>
</ul>
<p>This layout is designed to streamline the process of coding, visualising, and analysing in R. By becoming familiar with these panels, you can work more efficiently and stay organised as you conduct your analyses.</p>
</section>
<section id="working-directories" class="level2">
<h2 class="anchored" data-anchor-id="working-directories"><strong>Working Directories</strong></h2>
<p>In R, the <strong>working directory</strong> is the folder where R looks for files to read and where it saves files. Setting the correct working directory is essential for ensuring that R can access the data files and save results in the right location.</p>
<ul>
<li>To <strong>check</strong> your current working directory, use the <strong><code>getwd()</code></strong> function:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/ftura/OneDrive - Bournemouth University/FERHAT WORK BU/Teaching/L5 Quantitative Research Skills Semester 2 2024-25 R/QSS with R"</code></pre>
</div>
</div>
<p>This will return the current directory path.</p>
<p>To&nbsp;<strong>change</strong>&nbsp;your working directory, use the&nbsp;<code>setwd()</code>&nbsp;function followed by the path to the desired folder:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/ftura/OneDrive - Bournemouth University/FERHAT WORK BU/Teaching/L5 Quantitative Research Skills Semester 2 2024-25 R/QSS with R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s good practice to set your working directory at the start of each session to ensure R can find the files it needs for your project. You can also use the&nbsp;<em>Session</em>&nbsp;menu in RStudio to set the working directory.</p>
</section>
</section>
<section id="session-3-r-basics" class="level1">
<h1><strong>Session 3: R Basics</strong></h1>
<section id="arithmetic-and-objects" class="level2">
<h2 class="anchored" data-anchor-id="arithmetic-and-objects"><strong>Arithmetic and Objects</strong></h2>
<p>R is a powerful language for performing arithmetic operations and storing data in <strong>objects</strong>. An object in R is a variable that holds a value, such as a number, text, or more complex data like vectors or data frames. You can assign values to objects using the <strong><code>&lt;-</code></strong> operator (or <strong><code>=</code></strong> in some cases), and then use these objects in calculations or further analysis.</p>
<ul>
<li><strong>Arithmetic operations</strong> in R are straightforward and include basic operations such as addition, subtraction, multiplication, and division:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span>   <span class="co"># Addition</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">-</span> <span class="dv">3</span>   <span class="co"># Subtraction</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">*</span> <span class="dv">3</span>   <span class="co"># Multiplication</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">/</span> <span class="dv">3</span>   <span class="co"># Division</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<ul>
<li><strong>Creating objects</strong> allows you to store results for later use. For example:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span>   <span class="co"># Assigns the result of 3 + 3 to object 'a'</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">*</span> <span class="dv">3</span>   <span class="co"># Assigns the result of 3 * 3 to object 'b'</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</section>
<section id="vectors-matrices-and-data-frames" class="level2">
<h2 class="anchored" data-anchor-id="vectors-matrices-and-data-frames"><strong>Vectors, Matrices, and Data Frames</strong></h2>
<p><strong>What Are They?</strong></p>
<ul>
<li><p><strong>Vector</strong>: A one-dimensional collection of data (e.g., numbers) in a specific order.</p></li>
<li><p><strong>Matrix</strong>: A two-dimensional array of numbers with rows and columns.</p></li>
<li><p><strong>Data Frame</strong>: A matrix treated as a dataset, similar to a spreadsheet. Columns are variables, rows are observations.</p></li>
<li><p><strong>Tibble</strong>: A data frame in the <strong><code>tidyverse</code></strong> ecosystem with better formatting and printing.</p></li>
</ul>
<p>Once assigned, these objects can be used in more complex operations, helping to organise and reuse data throughout your analysis.</p>
<p><strong>Creating Vectors</strong></p>
<p>In R, a <strong>vector</strong> is a basic data structure that holds an ordered collection of elements, typically of the same type (e.g., numeric, character, or logical). Vectors are essential for data manipulation and analysis in R.</p>
<p>You can create vectors using the <strong><code>c()</code></strong> function, which combines individual elements into a single vector.</p>
<p><strong>Example: Creating a Numeric Vector</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>) <span class="co"># A vector of numbers from 1 to 5</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>v1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create another vector</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>v2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine the vectors</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v2)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>v3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now,v3 is a variable with 10 observations.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Example: Creating a Character Vector</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"cherry"</span>)  <span class="co"># A vector of fruits</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>v4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "apple"  "banana" "cherry"</code></pre>
</div>
</div>
<p><strong>Example: Creating a Logical Vector</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)  <span class="co"># A vector of logical values (TRUE/FALSE)</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>v5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<p><strong>Converting a Vector into a Data Frame</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Turn the vector v3 into a data frame</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(v3)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   v3
1   1
2   2
3   3
4   4
5   5
6   6
7   7
8   8
9   9
10 10</code></pre>
</div>
</div>
</section>
</section>
<section id="session-4-installing-and-loading-packages-in-r" class="level1">
<h1><strong>Session 4: Installing and Loading Packages in R</strong></h1>
<p><strong>Installing the <code>tidyverse</code> Package</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install tidyverse package</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Installing package into 'C:/Program Files/R/R-4.4.1/library'
(as 'lib' is unspecified)</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>package 'tidyverse' successfully unpacked and MD5 sums checked

The downloaded binary packages are in
    C:\Users\ftura\AppData\Local\Temp\Rtmp6tJgpF\downloaded_packages</code></pre>
</div>
</div>
<p><strong>Loading the <code>tidyverse</code> Package</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load/Activate tidyverse package</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.4.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p><strong>What’s Next?</strong></p>
<ul>
<li><p>After loading the <strong><code>tidyverse</code></strong>, you can use its functions for data analysis.</p></li>
<li><p>Examples and more details will follow in future chapters.</p></li>
</ul>
</section>
<section id="session-5-finding-data" class="level1">
<h1><strong>Session 5: Finding Data</strong></h1>
<section id="primary-data-collecting-your-own-data" class="level2">
<h2 class="anchored" data-anchor-id="primary-data-collecting-your-own-data"><strong>Primary Data: Collecting Your Own Data</strong></h2>
<p>Primary data refers to data that you collect yourself through surveys, experiments, interviews, or observations. This type of data is tailored to your specific research questions and allows for control over the data collection process, ensuring it meets your study’s needs.</p>
</section>
<section id="secondary-data-data-collected-by-others" class="level2">
<h2 class="anchored" data-anchor-id="secondary-data-data-collected-by-others"><strong>Secondary Data: Data Collected by Others</strong></h2>
<p>Secondary data is data that has already been collected and is available for use. This can include datasets from previous research, government statistics, or open-access data repositories. Using secondary data saves time and resources, but it’s important to evaluate its relevance and quality for your research.</p>
</section>
<section id="sources-of-secondary-data" class="level2">
<h2 class="anchored" data-anchor-id="sources-of-secondary-data"><strong>Sources of Secondary Data</strong></h2>
<p><strong>Library Resources</strong></p>
<p>University libraries often provide access to extensive collections of secondary data, including academic publications, journals, and specialised datasets. Librarians can guide you to appropriate resources for your research needs.</p>
<p><strong>Data Repositories</strong></p>
<p>Data repositories are online platforms that host a variety of datasets for public or restricted use. They are excellent sources for obtaining structured, high-quality data for analysis. Key repositories include:</p>
<ul>
<li><p><strong>UK Data Service</strong>: A comprehensive resource for social science and economic data, offering access to UK-specific datasets such as the British Social Attitudes Survey or the Labour Force Survey.<br>
<a href="https://ukdataservice.ac.uk/">Visit the UK Data Service</a></p></li>
<li><p><strong>ICPSR (Inter-university Consortium for Political and Social Research)</strong>: A leading repository for international social science research data.<br>
Visit ICPSR</p></li>
<li><p><strong>Harvard Dataverse</strong>: An open-access repository with datasets from various disciplines.<br>
<a href="https://dataverse.harvard.edu/">Visit Harvard Dataverse</a></p></li>
</ul>
<p><strong>Government Sources</strong></p>
<p>Government agencies publish a wealth of statistical data, often free of charge. Examples include:</p>
<ul>
<li><p>The UK’s <strong>Office for National Statistics (ONS)</strong>: <a href="https://www.ons.gov.uk/">Visit ONS</a></p></li>
<li><p>Local government or public sector organisations, which may provide data relevant to specific regions or topics.</p></li>
</ul>
<p><strong>Asking Someone</strong></p>
<p>Sometimes, the best data source can be an expert in your field. Reaching out to researchers, practitioners, or organisations may give you access to unique datasets not readily available online. Networking and collaboration can be valuable tools in locating the data you need.</p>
<p>By understanding the variety of data sources available, you can select the most suitable ones for your research while considering factors such as accessibility, quality, and relevance.</p>
</section>
</section>
<section id="session-6-data-management" class="level1">
<h1><strong>Session 6: Data Management</strong></h1>
<section id="the-world-of-tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="the-world-of-tidyverse"><strong>The World of Tidyverse</strong></h2>
<p>The <strong>Tidyverse</strong> is a collection of R packages designed to simplify and standardise data management, manipulation, and visualisation. These packages share a consistent syntax and philosophy, making it easier to work with data in R.</p>
<p>Key packages in the Tidyverse include:</p>
<ul>
<li><p><strong>dplyr</strong> for data manipulation.</p></li>
<li><p><strong>ggplot2</strong> for data visualisation.</p></li>
<li><p><strong>readr</strong> for reading various types of data files.</p></li>
</ul>
<p>Additionally, the Tidyverse ecosystem extends beyond its core packages, incorporating others such as:</p>
<ul>
<li><p><strong>haven</strong> for reading SPSS, Stata, and SAS files.</p></li>
<li><p><strong>readxl</strong> for reading Excel files.</p></li>
<li><p><strong>lubridate</strong> for working with date and time data.</p></li>
</ul>
<p>Throughout this chapter, we will explore how to use these tools effectively.</p>
</section>
<section id="how-to-read-in-data" class="level2">
<h2 class="anchored" data-anchor-id="how-to-read-in-data"><strong>How to Read in Data</strong></h2>
<p>Before working with data in R, it’s important to understand how to load data files from your working directory.</p>
<ul>
<li>To check your working directory:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/Users/ftura/OneDrive - Bournemouth University/FERHAT WORK BU/Teaching/L5 Quantitative Research Skills Semester 2 2024-25 R/QSS with R"</code></pre>
</div>
</div>
<ul>
<li>Make sure your directory contains a folder named <strong><code>Data</code></strong> where you store datasets for your analysis.</li>
</ul>
<p><strong>Common File Formats</strong></p>
<p>Here are some of the most commonly used data file formats:</p>
<ul>
<li><p><strong>Comma-separated values (.csv)</strong></p></li>
<li><p><strong>Text files (.txt)</strong></p></li>
<li><p><strong>Table files (.tab)</strong></p></li>
<li><p><strong>Excel files (.xlsx)</strong></p></li>
<li><p>Files from other statistical software:</p>
<ul>
<li><p><strong>Stata (.dta)</strong></p></li>
<li><p><strong>SPSS (.sav)</strong></p></li>
<li><p><strong>SAS (.sas7bdat)</strong></p></li>
</ul></li>
<li><p><strong>R’s own format (.RData)</strong></p></li>
</ul>
<p><strong>Reading Files in R</strong></p>
<p><strong>Reading <code>.csv</code> Files</strong></p>
<p>The <strong><code>read_csv()</code></strong> function from the <strong><code>readr</code></strong> package (part of Tidyverse) is used for reading CSV files as tibbles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>csvdata <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Data/2020 Scottish Index of Multiple Deprivation/simd2020.csv"</span>, <span class="at">na =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6976 Columns: 38
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (3): Data_Zone, Intermediate_Zone, Council_area
dbl (35): Total_population, Working_age_population, Income_rate, Income_coun...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p><strong>Reading Excel Files</strong></p>
<p>To read Excel files, use the <strong><code>readxl</code></strong> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># For older Excel files</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># xlsxdata &lt;- read_xls("Data/example_file.xls")</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co"># For newer Excel files</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># xlsxdata &lt;- read_xlsx("Data/example_file.xlsx")</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co"># If the Excel version is unknown</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co"># xlsxdata &lt;- read_excel("Data/example_file.xlsx")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reading <code>.txt</code> and <code>.tab</code> Files</strong></p>
<p>Use <strong><code>read_delim()</code></strong> from <strong><code>readr</code></strong> for text or tab-delimited files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># txtdata &lt;- read_delim("Data/example_file.txt", delim = "\t", na = "*")</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tabdata &lt;- read_delim("Data/example_file.tab", delim = "\t", na = "*")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reading Stata Files</strong></p>
<p>Use the <strong><code>haven</code></strong> package to read Stata files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'haven' was built under R version 4.4.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dtadata &lt;- read_dta("Data/example_file.dta")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reading SPSS Files</strong></p>
<p>Use the <strong><code>haven</code></strong> package to read SPSS files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># savdata &lt;- read_sav("Data/example_file.sav")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Reading SAS Files</strong></p>
<p>Use the <strong><code>haven</code></strong> package to read SAS files:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sasdata &lt;- read_sas("Data/example_file.sas7bdat")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Using RStudio’s Import Dataset Option</strong></p>
<p>For a graphical interface, use RStudio’s <strong>Import Dataset</strong> feature available in the Environment pane. This tool simplifies importing data without writing code and provides a preview of the dataset before loading it into R.</p>
<p>By mastering these techniques, you’ll be able to load a variety of datasets into R, enabling you to begin your data analysis efficiently.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>